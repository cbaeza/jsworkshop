<!DOCTYPE html>
<html>
  <head>
    <title>Arbeit mit der Prototyp-Eigenschaft</title>
    <meta charset="UTF-8">
    <!--
    /*
     *  This code is released under Creative Commons Attribution 4.0 International
     *  (CC BY 4.0) license, http://creativecommons.org/licenses/by/4.0/legalcode .
     *  That means:
     *
     *  You are free to:
     *
     *      Share — copy and redistribute the material in any medium or format
     *      Adapt — remix, transform, and build upon the material
     *               for any purpose, even commercially.
     *
     *      The licensor cannot revoke these freedoms as long as you follow the
     *      license terms.
     *
     *  Under the following terms:
     *
     *      Attribution — You must give appropriate credit, provide a link to the
     *      license, and indicate if changes were made. You may do so in any
     *      reasonable manner, but not in any way that suggests the licensor endorses
     *      you or your use.
     *
     *  No additional restrictions — You may not apply legal terms or technological
     *  measures that legally restrict others from doing anything the license
     *  permits.
     *
     *
     *  2014 Aeonium Software Systems, Robert Rohm.
     */
    -->
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" type="text/css" href="res/styles.css" />
    <script type="text/javascript" >

      /*
       * Konstruktor-Funktion
       */
      function Person(name, vorname) {
        this.name = name;
        this.vorname = vorname;

        // möglich, aber speicher-ineffizient
//        this.sayHello = function(){
//          return "Hallo, ich bin " + this.vorname;
//        };
      }

      /*
       * Erweiterung der Konstruktorfunktion über
       * die prototype-Eigenschaft des Funktionsobjekts
       */
      Person.prototype.sayHello = function() {
        return "Hallo, ich bin " + this.vorname;
      };


      var person  = new Person("Müller", "Lisa");
      var person2 = new Person("Mustermann", "Max");
      console.log(person.sayHello());

      // Beispiel: Eigenschaften im Prototyp,
      // mit gleichem Namen wie in Konstruktor
      Person.prototype.name    = 'Bitte angeben';
      Person.prototype.vorname = 'Bitte angeben';
      // Person.prototype.vorname wird aber bereits überdeckt
      // von Person.vorname:
      console.log(person.sayHello());

      // Erweiterung fürn ALLE Instanzen - über prototype
      Person.prototype.berichte = function(){
        // this in prototype-Methoden: steht für
        // das Objekt, auf dem die Methode letztendlich
        // aufgerufen wird.
        return "Bericht von " + this.vorname;
      }
      console.log(person.berichte());
      //console.log(person.prototype.berichte()); // nicht so


      // Typ-Prüfung:
      if (person instanceof Person) {
        console.log("ist Instanz von Person - OK");
      } else {
        console.log("ist Instanz KEINE von Person");
      }



    </script>
  </head>
  <body>
    <h1>Arbeit mit der Prototyp-Eigenschaft</h1>
    <pre>

      /*
       * Konstruktor-Funktion
       */
      function Person(name, vorname) {
        this.name = name;
        this.vorname = vorname;

        // möglich, aber speicher-ineffizient
//        this.sayHello = function(){
//          return "Hallo, ich bin " + this.vorname;
//        };
      }

      /*
       * Erweiterung der Konstruktorfunktion über prototyp
       */
      Person.prototype.sayHello = function() {
        return "Hallo, ich bin " + this.vorname;
      };


      var person  = new Person("Müller", "Lisa");
      var person2 = new Person("Mustermann", "Max");
      console.log(person.sayHello());

      // Beispiel: Eigenschaften im Prototyp,
      // mit gleichem Namen wie in Konstruktor
      Person.prototype.name    = 'Bitte angeben';
      Person.prototype.vorname = 'Bitte angeben';
      // Person.prototype.vorname wird aber bereits überdeckt
      // von Person.vorname:
      console.log(person.sayHello());

      // Erweiterung fürn ALLE Instanzen - über prototype
      Person.prototype.berichte = function(){
        // this in prototype-Methoden: steht für
        // das Objekt, auf dem die Methode letztendlich
        // aufgerufen wird.
        return "Bericht von " + this.vorname;
      }
      console.log(person.berichte());
      //console.log(person.prototype.berichte()); // nicht so


      // Typ-Prüfung:
      if (person instanceof Person) {
        console.log("ist Instanz von Person - OK");
      } else {
        console.log("ist Instanz KEINE von Person");
      }


    </pre>
  </body>
</html>
